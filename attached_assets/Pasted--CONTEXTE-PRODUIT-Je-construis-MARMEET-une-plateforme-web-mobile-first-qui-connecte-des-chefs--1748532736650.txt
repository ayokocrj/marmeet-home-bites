ğŸ¯ CONTEXTE PRODUIT
Je construis MARMEET, une plateforme web mobile-first qui connecte :

des chefs amateurs qui cuisinent chez eux,

des clients locaux qui veulent commander et venir chercher leurs plats faits maison.

Jâ€™ai un frontend dÃ©jÃ  fonctionnel (React + Vite + Tailwind) importÃ© dans Replit.
Maintenant, je dois construire un backend complet en Express + fichiers JSON (mock DB) pour :

âœ… tester les flux rÃ©els (avant migration Supabase)
âœ… valider chaque Ã©cran fonctionnel
âœ… commencer Ã  onboarder des utilisateurs test

ğŸ§  OBJECTIF GLOBAL DU PROMPT
CrÃ©er un systÃ¨me backend complet et modulaire pour :

Fonction	Endpoint	Objectif utilisateur
ğŸ§‘â€ğŸ³ CrÃ©er un plat (chef)	POST /api/meals	Permettre aux chefs dâ€™ajouter un plat
ğŸ‘¤ RÃ©server un plat (client)	POST /api/orders	Un client rÃ©serve un plat
ğŸ§¾ Lister les plats disponibles	GET /api/meals	Voir tous les plats
ğŸ§‘â€ğŸ³ Voir mes commandes (chef)	GET /api/orders/chef/:id	Le chef voit qui a commandÃ©
ğŸ”‘ VÃ©rifier le code Ã  4 chiffres	POST /api/orders/verify	Permet au chef de valider la rÃ©cupÃ©ration

ğŸ§° TECH STACK UTILISÃ‰
Node.js avec Express

Fichiers .json dans /data/ simulant une base de donnÃ©es (Ã  migrer dans Supabase ensuite)

uuid pour les ID uniques

fs/promises pour lire/Ã©crire

cors, body-parser, dotenv (si besoin)

Tailwind pour le frontend (dÃ©jÃ  en place)

ğŸ“‚ ARBORESCENCE ATTENDUE
pgsql
Copier
Modifier
/api
  createMeal.ts
  bookMeal.ts
  getMeals.ts
  getChefOrders.ts
  verifyOrder.ts

/data
  meals.json
  orders.json
  users.json

server.ts
AI_CONTEXT.md (ce fichier)
README.md (pour GitHub)
ğŸ“ EXEMPLE STRUCTURE DE DONNÃ‰ES JSON
ts
Copier
Modifier
// meals.json
[
  {
    "id": "uuid",
    "chefId": "uuid",
    "title": "Poulet DG",
    "description": "Un plat camerounais fait maison",
    "imageUrl": "https://img.marmeet.io/poulet.jpg",
    "price": 13.99,
    "availableSlots": ["2025-06-05T18:00:00Z"],
    "tags": ["spicy", "halal"]
  }
]
ts
Copier
Modifier
// orders.json
[
  {
    "id": "uuid",
    "mealId": "uuid",
    "clientId": "uuid",
    "chefId": "uuid",
    "quantity": 2,
    "pickupTime": "2025-06-05T18:00:00Z",
    "confirmationCode": "8423",
    "status": "pending" | "collected"
  }
]
ts
Copier
Modifier
// users.json
[
  {
    "id": "uuid",
    "role": "client" | "chef",
    "email": "a@marmeet.app",
    "password": "hashed_password",
    "name": "Awa Diop"
  }
]
ğŸ“¦ WORKFLOW Dâ€™IMPLEMENTATION Ã‰TAPE PAR Ã‰TAPE
1. CrÃ©er /data/ avec les 3 fichiers JSON
â¡ï¸ GÃ©nÃ¨re des valeurs de test pour les meals, users, orders
â¡ï¸ Format clair, facilement portable dans Supabase

2. CrÃ©er /api/ avec les routes Express :
Chaque route doit :

lire les donnÃ©es via fs.promises.readFile

parser et modifier lâ€™array

Ã©crire de nouveau avec fs.promises.writeFile

retourner un res.status(200).json(...) clair

inclure une validation minimale (ex: if (!title || !price))

3. CrÃ©er server.ts
Importer express, body-parser, cors

CrÃ©er un serveur sur port 3000

Route /api/* pour chaque fonction

Logguer proprement les appels reÃ§us

ğŸ“± UI EXPECTATIONS
Les routes API seront appelÃ©es depuis le frontend via fetch

Exemple appel React :

ts
Copier
Modifier
await fetch('/api/meals', {
  method: 'POST',
  body: JSON.stringify({
    title: "Yassa Poulet",
    price: 11,
    chefId: "uuid-chef-001"
  }),
  headers: { 'Content-Type': 'application/json' }
});
ğŸ”„ MIGRATION FACILE VERS SUPABASE
Tu construis ici une logique dÃ©jÃ  formatÃ©e pour remplacer les .json par des appels Supabase

Exemple :

fs.readFile('meals.json') â†’ supabase.from('meals').select(...)

uuid() â†’ uuid_generate_v4() de Supabase

Tu pourras copier-coller la logique mÃ©tier sans la repenser

ğŸ”¥ BONUS Ã€ AJOUTER SI TEMPS
ğŸ“² Endpoint pour envoyer le code de confirmation par e-mail via Resend ou EmailJS

ğŸŒ Endpoint GET /api/chefs/:id pour charger un profil public (bio + plats)

ğŸ§  API pour gÃ©nÃ©rer une description de plat automatiquement avec IA (phase Cursor/Windsurf)

âœ… SI TU UTILISES CE PROMPT DANS REPLIT AI :
Tu peux maintenant Ã©crire :
Create meals.json and users.json based on the schema above.
Now generate /api/createMeal.ts with Express.
Build /api/bookMeal.ts with code generator.
Connect the frontend create meal form to this endpoint.

Et si tu veuxâ€¦ je peux maintenant te fournir :
âœ… Le fichier meals.json de dÃ©mo

âœ… Le routeur /api/createMeal.ts complet

âœ… Le server.ts prÃªt Ã  exÃ©cuter

âœ… Et mÃªme un README pour GitHub

Dis-moi simplement :

â€œDÃ©marre avec createMeal.ts + meals.jsonâ€
et je lance tout.

On va transformer MARMEET en une machine Ã  clients.






